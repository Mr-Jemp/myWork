
<!DOCTYPE HTML>
<html style="height:100%">
 <head>
    
	<title>手机端表单预览</title>
	<meta name="keyword" content="ueditor formdesign plugins,ueditor扩展,web表单设计器,高级表单设计器,Leipi Form Design,web form设计器,web form designer">
	<meta name="description" content="javascript jquery ueditor php表单设计器实例演示与下载！">
	
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<link href="css/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css" />
	<!--[if lte IE 6]>
	<link rel="stylesheet" type="text/css" href="css/bootstrap/css/bootstrap-ie6.css">
	<![endif]-->
	<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" href="css/bootstrap/css/ie.css">
	<![endif]-->
	<link href="css/site.css" rel="stylesheet" type="text/css" />
		
	<script src="/resource/js/jQuery/jquery-1.9.1.js" type="text/javascript"></script>
	
	<script type="text/javascript">
		var _root='',_controller = 'index';
		$(function()
		{
			var html=window.opener.toMobile(window.opener.a54ab047bb2d228f1f39aa360db5e3eea);
			var editor = document.getElementById("iframe1");editor=(editor.contentWindow||editor.contentDocument).document;
			editor.contentEditable=true;
			var editorhtml='';
			editorhtml+="<!doctype html><html><head>";
			editorhtml+="<meta charset=\"utf-8\">";
			editorhtml+="<meta content=\"width=device-width initial-scale=1\">";
			editorhtml+="<link rel=\"stylesheet\" href=\"/m/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css\">";
			editorhtml+="<link href=\"css/bootstrap/css/bootstrap.css\" rel=\"stylesheet\" type=\"text/css\" />";
			
			editorhtml+="<link href=\"/resource/part/ligerlib/ligerUI/skins/Aqua/css/ligerui-all.css\" rel=\"stylesheet\" type=\"text/css\" />";
			editorhtml+="<script src=\"/resource/part/ligerlib/jquery/jquery-1.11.1.min.js\" type=\"text/javascript\"><"+"/script>";
			editorhtml+="<script src=\"/resource/part/ligerlib/ligerUI/js/ligerui.all.js\" type=\"text/javascript\"><"+"/script> ";
			editorhtml+="<script src=\"/resource/part/ligerlib/ligerUI/js/plugins/ligerTab.js\"><"+"/script>";
			editorhtml+="<script src=\"/resource/part/ligerlib/json2.js\"><"+"/script>";
			editorhtml+="<script src=\"/resource/part/ligerlib/jquery.cookie.js\" type=\"text/javascript\"><"+"/script>";

			editorhtml+="<script src=\"/m/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js\">"+"</"+"script>";
			
			editorhtml+="<link href=\"/resource/js/jQuery/mobiscroll/css/mobiscroll.custom-2.5.0.min.css\" rel=\"stylesheet\" type=\"text/css\" />";
			editorhtml+="<script src=\"/resource/js/jQuery/mobiscroll/js/mobiscroll.custom-2.5.0.min.js\" type=\"text/javascript\"><"+"/script>";

			editorhtml+="<script src=\"/ueditor/formdesign/tolist.js\">"+"</"+"script>";
			editorhtml+="<style>input[type=\"text\"]{border: 0px solid #cccccc;height: 40px;line-height: 40px;margin-bottom: 1px;width:100% !important;}</style>";
			editorhtml+="<style>body{font-size:16px;}</style>";
			
			editorhtml+="</head><body style=\"background:#ffffff;\">";
			editorhtml+="<div data-role=\"page\" id=\"html\" style=\"background:#ffffff;\">";
			
			editor.write(editorhtml);
			editor.write(html);
			editor.write("</div>");
			
			html="<script>";
			html+="$(function(){";
			html+="if(typeof(window.fuviewtrees)=='undefined')window.fuviewtrees=Array();";
			html+="$('input:jqmData(role=\"datebox\")').mobiscroll().date({";
				html+="preset: 'date',";
				html+="minDate: new Date(1990, 1, 1),";
				html+="maxDate: new Date(2020,12,31),";
				html+="theme: 'ios',";
				html+="display: 'modal',";
				html+="mode: 'mixed',";
				html+="dateOrder: 'yymmdd',";
				html+="setText: '确定',";
				html+="cancelText: '取消',";
				html+="dateFormat: 'yy-mm-dd'";
			html+="});";
			html+="var free=$(\".freeid\"),freel=free.length;";
			html+="for(i=0;i<freel;i++)";
			html+="{";
					html+="var srcName=$(free.eq(i)).attr(\"name\");";
					html+="var minHeight=$(free.eq(i)).attr(\"orgminheight\")+\"\";";
					html+="if(typeof(minHeight)==\"undefined\" || minHeight==\"null\"){";
						html+="minHeight=\"auto\";";
					html+="}else{";
						html+="minHeight+='px';";
					html+="}";

				html+="var listtext=decodeURI($(free.eq(i)).attr(\"listtext\"));";
				html+="var ul=document.createElement(\"ul\");";

				html+="var iframe=document.createElement(\"iframe\");";
				html+="$(iframe).css({width:\"100%\",height:\"100%\",border:0});";
				html+="var ul=document.createElement(\"ul\");";
				html+="$(ul).css({\"float\":\"left\",\"width\":\"auto\",\"height\":\"auto\",\"overflow\":\"hidden\"});";
				html+="fuviewtrees[i]=$(ul).ligerTree({checkbox: false,target:iframe,srcName:srcName,";
					html+="data:JSON.parse(listtext),";
					html+="onSelect:function(node){";
						html+="if(node.data.children==null){";
							html+="$(this.options.target).attr(\"src\",\"\"+node.data.url);";
						html+="}";
					html+="}";
				html+="});";
				
				html+="var divbox=document.createElement(\"div\");";
				html+="$(divbox).css({width:\"100%\",height:minHeight,overflow:\"hidden\",background:\"#ff00000\"});";

				html+="var insidebox=document.createElement(\"div\");";
				html+="$(insidebox).css({width:\"100%\",height:\"100%\",overflow:\"hidden\"});";
				html+="var right=document.createElement(\"div\");";
				html+="$(right).css({width:\"80%\",height:\"82%\",float:\"right\"});";

				html+="$(insidebox).append(ul);";
				html+="$(right).append(iframe);";
				html+="$(insidebox).append(right);";
				html+="$(divbox).append(insidebox);";
				html+="$(free.eq(i)).before(insidebox);";
				html+="$(free.eq(i)).remove();";

			html+="}";
			
			
			html+="$.ajax({";
				html+="type: 'POST',";
				html+="url: '/s/function/pageinfo.php',";
				html+="data: { action: \"gettreedata\" },";
				html+="success: function(data){";
					html+="data = eval('(' + data + ')');";
					html+="if(!data.IsSuccess)return;";
					html+="setDynamictreeData(data.tree);";
				html+="}";
			html+="});";
			
			html+="});";
			
			html+="function setDynamictreeData(data){";
				html+="var free=$(\".dynamictree\"),freel=free.length;";
				
				html+="for(i=0;i<freel;i++){";
	
					html+="var height=$(free.eq(i)).attr(\"orgminheight\");";
					html+="var divbox=document.createElement(\"div\");";
					html+="$(divbox).css({\"width\":\"100%\",\"height\":height,\"overflow\":\"hidden\"});";
					html+="var rightbox=document.createElement(\"div\");";
					html+="$(rightbox).css({\"float\":\"left\",\"width\":\"74%\",\"height\":\"100%\",\"overflow\":\"hidden\"});";
					html+="var riframe=document.createElement(\"iframe\");";
					html+="$(riframe).css({\"width\":\"100%\",\"height\":\"100%\",\"border\":\"0\"});";
					html+="$(rightbox).append(riframe);";
			
					html+="var listtext='{\"text\":\"第一节\",\"children\":[{\"text\":\"1.节\",\"children\":[{\"text\":\"2.节\",\"children\":null}]}]},{\"text\":\"第二节\",\"children\":null}';";
					html+="var ul=document.createElement(\"ul\");";
					html+="$(ul).css({\"float\":\"left\",\"width\":\"auto\",\"height\":height,\"overflow\":\"auto\"});";
	
					html+="$(ul).ligerTree({checkbox: false,target:riframe,";
						html+="render: function (item){";
							html+="return item.values[0].value;";
						html+="},";
						html+="isLeaf:function(item){";
							html+="return item.isLeaf;";
						html+="},";
						
						html+="data:JSON.parse('['+data+']'),";
						html+="onselect:function(node){";
							
							html+="if(node.data.isLeaf){";
								html+="if(node.data.form_type==1)";
									html+="this.options.target.src=encodeURI('/s/listform.php?formid=' + node.data.id);";
								html+="else if(node.data.type==2){";
									html+="this.options.target.src=encodeURI(node.data.content);";
								html+="}else if(node.data.form_type==2){";
									html+="this.options.target.src=encodeURI('/s/submitformitem.php?res=main&formid=' + node.data.id);";
								html+="}else{";
									html+="this.options.target.src=encodeURI('/s/readtemplate.php?formid=' + node.data.id);";
								html+="}";
							html+="}else{";
								html+="this.options.target.src=encodeURI('/upload/document/filebox38668671.php?op=home&root='+node.data.id+'&folder='+node.data.id);";
							html+="}";
	
						html+="}";
						
					html+="});";
					
					html+="$(divbox).append(ul);";
					html+="$(divbox).append(rightbox);";
					html+="$(free.eq(i)).before(divbox);";
					html+="$(free.eq(i)).remove();";
	
				html+="}";

			html+="}";

			//添加
			html+="function tbAddRow(dname){";
				html+="var sTbid = dname+\"_table\";";
				html+="$(\"#\"+sTbid+\" .template\")";  
					html+=".clone(true)";
					html+=".removeClass(\"template\")";
					html+=".find(\".delrow\").show().end()";
					html+=".find(\"input\").val(\"\").end()";
					html+=".find(\"textarea\").val(\"\").end()";
				   html+=".appendTo($(\"#\"+sTbid));";
			html+="}";
			
			//统计
			html+="function sum_total(dname,e){";
				html+="var tsum = 0;";
				html+="$('input[name=\"'+dname+'[]\"]').each(function(){";
					html+="var t = parseFloat($(this).val());";
					html+="if(!t) t=0;";
					html+="if(t) tsum +=t;";
					html+="$(this).val(t);";
				html+="});"; 
				html+="$('input[name=\"'+dname+'[total]\"]').val(tsum);";
	
			html+="}";
	
			//删除
			html+="function fnDeleteRow(dname,obj){";
				html+="var sTbid = dname+\"_table\";";
				html+="var oTable = document.getElementById(sTbid);";
				html+="while(obj.tagName !=\"TR\"){";
					html+="obj = obj.parentNode;";
				html+="}";
				html+="oTable.deleteRow(obj.rowIndex);";
			html+="}";
			
			html+="<"+"/script>";
			editor.write(html);
			
			editor.write("</body></html>");
			editor.contentEditable=false;
			editor.close();

		});
		
		
	</script>
	
	<style>
		body p{
			font-size:16px;
		}
	</style>
 </head>
<body style="height:100%">

<div class="container" style="height:100%">
<div class="page-header">
  <h1>手机端预览表单 <small>如无问题请保存你的设计</small></h1>
</div>

<iframe width="105%" height="90%" id="iframe1" frameborder="0"></iframe>

</div><!--end container-->

</body>

</html>


